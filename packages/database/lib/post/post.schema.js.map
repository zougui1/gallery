{"version":3,"file":"post.schema.js","sourceRoot":"","sources":["../../src/post/post.schema.ts"],"names":[],"mappings":"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","sourcesContent":["import { z } from 'zod';\n\nimport { submissionSchema } from '@zougui/furaffinity';\nimport { PostType, PostRating, PostSeriesType } from '@zougui/gallery.enums';\n\nimport { type WithId } from '../types';\n\nexport const fileSchema = z.object({\n  fileName: z.string().min(1),\n  contentType: z.string().min(1),\n  hash: z.string().optional(),\n  checksum: z.string().optional(),\n  size: z.number().positive(),\n});\n\nexport const imageFileSchema = fileSchema.extend({\n  width: z.number().positive(),\n  height: z.number().positive(),\n});\n\nexport const textFileSchema = fileSchema;\n\nexport const postSchema = z.object({\n  sourceUrl: z.string().url().min(1),\n\n  series: z.object({\n    id: z.string().min(1),\n    type: z.enum(Object.values(PostSeriesType) as [PostSeriesType, ...PostSeriesType[]]),\n    name: z.string().min(1),\n    chapterName: z.string().optional(),\n    chapterIndex: z.number().min(1).int(),\n    partIndex: z.number().min(1).int(),\n  }).optional(),\n\n  alt: z.object({\n    id: z.string().min(1),\n    label: z.string().min(1),\n  }).optional(),\n\n  similarity: z.object({\n    id: z.string().min(1),\n  }).optional(),\n\n  title: z.string().min(1),\n  contentType: z.enum(Object.values(PostType) as [PostType, ...PostType[]]),\n  rating: z.enum(Object.values(PostRating) as [PostRating, ...PostRating[]]),\n  description: z.string().optional(),\n  keywords: z.array(z.string().min(1)),\n\n  author: z.object({\n    name: z.string().min(1),\n    url: z.string().url().min(1),\n    avatar: z.string().url().min(1),\n  }).optional(),\n\n  file: z.union([imageFileSchema, textFileSchema]),\n\n  thumbnail: z.object({\n    original: z.object({\n      fileName: z.string().min(1),\n      contentType: z.string().min(1),\n      size: z.number().positive(),\n      width: z.number().positive(),\n      height: z.number().positive(),\n    }),\n\n    small: z.object({\n      fileName: z.string().min(1),\n      contentType: z.string().min(1),\n      size: z.number().positive(),\n      width: z.number().positive(),\n      height: z.number().positive(),\n    }),\n  }),\n\n  attachment: z.object({\n    fileName: z.string().min(1),\n    contentType: z.string().min(1),\n    sourceUrl: z.string().url().min(1),\n    size: z.number().positive(),\n  }).optional(),\n\n  postedAt: z.date(),\n  createdAt: z.date(),\n  removedAt: z.date().optional(),\n\n  originalData: submissionSchema.optional(),\n});\n\nexport type PostSchema = z.infer<typeof postSchema>;\nexport type PostSchemaWithId = WithId<PostSchema>;\n"]}