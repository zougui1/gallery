{"version":3,"file":"post.model.js","sourceRoot":"","sources":["../../src/post/post.model.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,wDAAgC;AAEhC,oDAAsD;AAEtD,yDAA6E;AAE7E,MAAa,QAAQ;CAqBpB;AArBD,4BAqBC;AAnBC;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;0CACP;AAGlB;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;6CACJ;AAGrB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;;sCAC1B;AAGd;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;;0CAClD;AAGlB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;sCACzB;AAGd;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;;uCACzB;AAGf;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;;wCACxB;AAGlB,MAAa,cAAc;CAY1B;AAZD,wCAYC;AAVC;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;gDACP;AAGlB;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;mDACJ;AAGrB;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;iDACN;AAGnB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;4CACzB;AAGhB,MAAa,iBAAiB;CAe7B;AAfD,8CAeC;AAbC;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;mDACP;AAGlB;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;sDACJ;AAGrB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;+CACzB;AAGd;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;gDACxB;AAGf;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;iDACvB;AAGlB,MAAa,aAAa;CAMzB;AAND,sCAMC;AAJC;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,iBAAiB,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;;+CAC5C;AAGlB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,iBAAiB,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;;4CAC/C;AAGjB,MAAa,MAAM;CASlB;AATD,wBASC;AAPC;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;oCACX;AAGd;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;mCACZ;AAGb;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;;sCACxB;AAGlB,MAAa,kBAAkB;CAkB9B;AAlBD,gDAkBC;AAhBC;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;;8CAC1B;AAGZ;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,8BAAc,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;gDACvC;AAGtB;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;gDACX;AAGd;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;;uDACnB;AAGrB;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;wDACH;AAGtB;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;qDACN;AAGrB,MAAa,eAAe;CAM3B;AAND,0CAMC;AAJC;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;;2CAC1B;AAGZ;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;8CACV;AAGjB,MAAa,sBAAsB;CAGlC;AAHD,wDAGC;AADC;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;;kDAC1B;AAGd,MAAa,IAAI;CAwDhB;AAxDD,oBAwDC;AAtDC;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;;uCACjC;AAGnB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,kBAAkB,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;8BACvD,kBAAkB;oCAAC;AAG5B;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,eAAe,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;8BACvD,eAAe;iCAAC;AAGtB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,sBAAsB,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;8BACvD,sBAAsB;wCAAC;AAGpC;IADC,IAAA,gBAAI,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;mCACV;AAGf;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,wBAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;yCAChC;AAGvB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,0BAAU,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;oCACrC;AAGpB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;;yCACnB;AAGrB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;sCACrB;AAGpB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;8BAC3C,MAAM;oCAAC;AAGhB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;8BAC9C,QAAQ;kCAAC;AAGhB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,cAAc,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;8BAC/C,cAAc;wCAAC;AAG5B;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,aAAa,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;8BAC9C,aAAa;uCAAC;AAG1B;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;8BAC1B,IAAI;sCAAC;AAGhB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;8BACzB,IAAI;uCAAC;AAGjB;IADC,IAAA,gBAAI,EAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;8BAC1B,IAAI;uCAAC;AAQjB;IANC,IAAA,gBAAI,EAAC;QACJ,UAAU,EAAE,oBAAQ,CAAC,KAAK;QAC1B,IAAI,EAAE,kBAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK;QACjC,QAAQ,EAAE,KAAK;QACf,GAAG,EAAE,KAAK;KACX,CAAC;;0CACqB","sourcesContent":["import mongoose from 'mongoose';\n\nimport { Severity, prop } from '@typegoose/typegoose';\n\nimport { PostType, PostRating, PostSeriesType } from '@zougui/gallery.enums';\n\nexport class PostFile {\n  @prop({ required: true })\n  fileName!: string;\n\n  @prop({ required: true })\n  contentType!: string;\n\n  @prop({ type: String, required: false })\n  hash?: string;\n\n  @prop({ type: String, required: false, unique: true, sparse: true })\n  checksum?: string;\n\n  @prop({ type: Number, required: true })\n  size!: number;\n\n  @prop({ type: Number, required: false })\n  width?: number;\n\n  @prop({ type: Number, required: false })\n  height?: number;\n}\n\nexport class PostAttachment {\n  @prop({ required: true })\n  fileName!: string;\n\n  @prop({ required: true })\n  contentType!: string;\n\n  @prop({ required: true })\n  sourceUrl!: string;\n\n  @prop({ type: Number, required: true })\n  size!: number;\n}\n\nexport class PostThumbnailFile {\n  @prop({ required: true })\n  fileName!: string;\n\n  @prop({ required: true })\n  contentType!: string;\n\n  @prop({ type: Number, required: true })\n  size!: number;\n\n  @prop({ type: Number, required: true })\n  width!: number;\n\n  @prop({ type: Number, required: true })\n  height!: number;\n}\n\nexport class PostThumbnail {\n  @prop({ type: PostThumbnailFile, required: true, _id: false })\n  original!: string;\n\n  @prop({ type: PostThumbnailFile, required: true, _id: false })\n  small!: string;\n}\n\nexport class Author {\n  @prop({ required: true })\n  name!: string;\n\n  @prop({ required: true })\n  url!: string;\n\n  @prop({ type: String, required: false })\n  avatar?: string;\n}\n\nexport class PostSeriesMetadata {\n  @prop({ required: true, index: true })\n  id!: string;\n\n  @prop({ type: String, enum: PostSeriesType, required: true })\n  type!: PostSeriesType;\n\n  @prop({ required: true })\n  name!: string;\n\n  @prop({ type: String, required: false })\n  chapterName?: string;\n\n  @prop({ required: true })\n  chapterIndex!: number;\n\n  @prop({ required: true })\n  partIndex!: number;\n}\n\nexport class PostAltMetadata {\n  @prop({ required: true, index: true })\n  id!: string;\n\n  @prop({ required: true })\n  label!: string;\n}\n\nexport class PostSimilarityMetadata {\n  @prop({ required: true, index: true })\n  id!: string;\n}\n\nexport class Post {\n  @prop({ required: true, unique: true, index: true })\n  sourceUrl!: string;\n\n  @prop({ type: PostSeriesMetadata, required: false, _id: false })\n  series?: PostSeriesMetadata;\n\n  @prop({ type: PostAltMetadata, required: false, _id: false })\n  alt?: PostAltMetadata;\n\n  @prop({ type: PostSimilarityMetadata, required: false, _id: false })\n  similarity?: PostSimilarityMetadata;\n\n  @prop({ required: true })\n  title!: string;\n\n  @prop({ enum: PostType, type: String, required: true })\n  contentType!: PostType;\n\n  @prop({ enum: PostRating, type: String, required: true })\n  rating!: PostRating;\n\n  @prop({ type: String, required: false })\n  description?: string;\n\n  @prop({ type: [String], required: true })\n  keywords!: string[];\n\n  @prop({ type: Author, required: false, _id: false })\n  author?: Author;\n\n  @prop({ type: PostFile, required: true, _id: false })\n  file!: PostFile;\n\n  @prop({ type: PostAttachment, required: false, _id: false })\n  attachment?: PostAttachment;\n\n  @prop({ type: PostThumbnail, required: true, _id: false })\n  thumbnail!: PostThumbnail;\n\n  @prop({ type: Date, required: true })\n  postedAt!: Date;\n\n  @prop({ type: Date, required: true })\n  createdAt!: Date;\n\n  @prop({ type: Date, required: false })\n  removedAt?: Date;\n\n  @prop({\n    allowMixed: Severity.ALLOW,\n    type: mongoose.Schema.Types.Mixed,\n    required: false,\n    _id: false,\n  })\n  originalData?: unknown;\n}\n"]}